# Тестовое задание по нахождению точки пересечения прямых.

## Описание проекта

### **Проект разработан под Linux!**

### Краткие заметки к проекту
В папке **src/lib** имеются следоющие файлы:
- vector3d.h - header к классу вектор;
- vector3d.cpp - реализация класса вектор;
- segment3d.h - header к классу отрезок;
- segment3d.cpp - реализация класса отрезок;
- intersection.h - header к функциям расчета пересечения сегментов.
- intersection.cpp - реализация функций расчета пересечения сегментов.

**src/main.cpp** - простая main-функция с вводом из консоли и выводом туда же.

#### intersection.h:
- Функции:
  - ```Vector3D Intersect(...)``` - Получает на ход 2 отрезка (сегмента), возвращает точку пересечения в формате Vector3D. В случае отсутствия пересечения "кидает" ошибку.
  - ```Vec3 IntersectVec3(...)``` - Получает на ход 2 отрезка (сегмента), возвращает точку пересечения в формате Vec3 (упрощенный формат для трехмерной точки). В случае отсутствия пересечения "кидает" ошибку.
  - ```IntersectionType IntersectWrapper(...)``` - Получает на ход 2 отрезка (сегмента) и Vector3D в который будет записана точка пересечения, возвращает "тип пересечения" в формате IntersectionType (```kIntersect``` - пересечение есть, ```kOverlap``` - наложение есть, ```kNoIntersect``` - нет пересечения).
- Специальный класс ошибок для функций вычисления пересечения: ```IntersectError``` - материнский для:
  |Класс ошибки|Описание|Возвращаемое значение|
  |---|---|----|
  |OverlapError|Отрезки паложены друг на друга|Сообщение ошибки и границы наложения|
  |NoIntersectError|Отрезки не пересекаются|Сообщение ошибки|
  |ParallelError|Отрезки параллельны|Сообщение ошибки|
  |SkewError|Отрезки не пересекаются и не параллельны|Сообщение ошибки|


## Сборка и запуск проекта

Проект использует *CMake* для сборки и *GNU Make* как оболочку для запуска основных команд. Допускается работа с проектом через оба инструмента. Причем *CMake* "собирает" проект в директории выбранной пользователем, в то время как *GNU Make* может быть запущен прямо из папки **src** (он создаст папку **build** для сборки в корне проекта автоматически).

### Структура проекта
```
project_dir/
├── build/              # создаётся автоматически
├── src/
│   ├── CMakeLists.txt  # основная конфигурация CMake
│   ├── Makefile        # команды для пользователя
│   └── tests/
│       └── CMakeLists.txt
└── README.md
```

### Описание *CMake*-файлов
#### **src/CMakeLists.txt**

- Собирает библиотеку intersection
- Собирает исполняемый файл test_task
- Запускает его при помощи цели run_test_task 
- Позволяет форматировать код
- Подключает сборку тестов из **src/tests/CMakeLists.txt**

#### **src/tests/CMakeLists.txt**

- Собирает тестовый бинарник tests (GoogleTest)
- цель run_tests — запуск тестов
- цель coverage — генерация HTML-отчёта покрытия кода (расположенный в **build/tests/coverage/index.html**)

#### Цели создаваемые *CMake*
Цели могут быть использованы с помощью синтекса *CMake* или же с помощью синтекса *GNU Make*, находясь в папке сборки проекта (default: **build/**).
- Цели названы схожим образом с [таковыми в Makefile](#доступные-цели). Отсутствуют цели: *clean_all* и *open*. Присутствуют цели: *valgrind_tests*, *style_check* и *style_make*.

### Использование *Makefile*
Все команды выполняются из каталога src.

#### Доступные цели
|Цель|Описание|
|---|---|
|make test_task |      собрать основную программу |
|make run_test_task |  собрать и запустить программу  |
|make test  |           собрать тесты |
|make run_tests |      собрать и запустить тесты    |
|make coverage  |       сгенерировать coverage-отчёт  |
|make open  |           сгенерировать и открыть HTML-отчёт покрытия   |
|make clean |          очистить build-файлы   |
|make clean_all |      удалить каталог build целиком    |

## Заметки

- Каталог build/ создаётся автоматически
- Все артефакты сборки находятся в build/
- Требуется:
  - OC: Linux
  - cmake >= 3.21
  - gcc или clang
  - lcov, genhtml (только для coverage)